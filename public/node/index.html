<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="https://unpkg.com/typeit@8.7.1/dist/index.umd.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-interactivity@latest/dist/lottie-interactivity.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    
    <link rel="shortcut icon" href="../imgs/ico.png" type="image/x-icon">
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/carousel/">
    <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="../style/themes/tema-escuro.css"  id="estilo-tema">
    
    <!-- Custom styles for this template -->
    <link href="../style/pages_artigos.css" rel="stylesheet">
    <link href="../style/step.css" rel="stylesheet">

    <title>MathLearn | Fração</title>
  </head>

  <body>

    <header id="header" ></header>

    <section id="sec00">

    </section>

    <section id="sec1" class="container-fluid d-flex justify-content-center">

        <form id="question-form" class="d-flex flex-column">
            <div class="row d-flex justify-content-center w-100 row_textForm">
                <p class="textForm"><b>Gerador calculacional</b></p>
                <p class="subtextForm">Veja o passo a passo de expressões matemáticas</p>
            </div>
            <div class="row d-flex justify-content-center w-100 rowInput">
                <input type="text" id="question-input" placeholder="Digite sua pergunta" required>
                <div id="boxEmpty" style="text-align: center;"></div>
            </div>
            <div class="row d-flex justify-content-center w-100 rowButton">
                <button id="btnSend" class="btn btn-success btnSend" type="submit">Enviar</button>
            </div>
        </form>
    </section>

    <section id="sec2" class="container-fluid">
        <div id="resultAPI" class="resultAPI d-flex justify-content-center w-100 flex-column">
            <div class="row d-flex justify-content-center w-100 row_textForm">
                <p class="textForm"><b>Resposta:</b></p>
            </div>
            <!--<div class="row d-flex justify-content-center image-container">
                <img src="../baixados.gif" alt="">
            </div>-->
            <div id="image-container" class="image-container d-flex justify-content-center flex-column"></div>
        </div>
            
        </div>
        
    </section>

    <section id="sec3" class="copyrightEnterprise container-fluid d-flex justify-content-center" >
        <div class="columnCopy d-flex justify-content-center flex-column">
            <p class="textCopy">Com a tecnologia de</p>
            <img src="../imgs/wolfran logo.png" alt="logo wolfram" class="logo_wolfram">
        </div>
    </section>

      <footer id="footer" ></footer>

      <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
      <script src="../js/menu_responsivo.js"></script>
      <script src="../js/functions.js"></script>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

      <script>
        function alternarTema() {
    var estiloTema = document.getElementById("estilo-tema");
    if (estiloTema.getAttribute("href") === "../style/themes/tema-escuro.css") {
        estiloTema.setAttribute("href", "../style/themes/tema-claro.css");
        document.body.classList.remove("dark-theme");
    } else {
        estiloTema.setAttribute("href", "../style/themes/tema-escuro.css");
        document.body.classList.add("dark-theme");
    }
}

      </script>
      
      <script>
        //cabecalho
        fetch('includes/cabecalhoNode.html')
        .then(response => response.text())
        .then(content => {
            document.querySelector('#header').innerHTML = content;
        })
        .catch(error => {
            console.error('Erro ao carregar conteúdo:', error);
        });

        //rodape
        fetch('includes/rodapeNode.html')
        .then(response => response.text())
        .then(content => {
            document.querySelector('#footer').innerHTML = content;
        })
        .catch(error => {
            console.error('Erro ao carregar conteúdo:', error);
        });
      </script>

<script>
    const form = document.getElementById('question-form');
    const questionInput = document.getElementById('question-input');
    const responseContainer = document.getElementById('image-container');
    const section2 = document.getElementById('sec2');
    const btnSend = document.getElementById('btnSend');

    // Definir a função que lida com o envio do formulário
    function handleFormSubmit(e) {
        e.preventDefault();

        const question = questionInput.value;

        try {
            fetch('/ask', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ question })
            })
            .then(response => response.json())
            .then(data => {
                const responseHTML = data.responseHTML;
                responseContainer.innerHTML = responseHTML;
                section2.style.display = 'block';
            })
            .catch(error => {
                console.error('Erro ao enviar pergunta:', error);
            });
        } catch (error) {
            console.error('Erro ao enviar pergunta:', error);
        }
    }

    // Adicionar o ouvinte para o evento submit do formulário
    form.addEventListener('submit', handleFormSubmit);

    // Adicionar o ouvinte para o evento click do botão
    btnSend.addEventListener('click', function(event) {
        event.preventDefault();

        if (questionInput.value.trim() === "") {
            var boxEmpty = document.getElementById("boxEmpty");
            boxEmpty.innerText = "Digite algo para enviar!";
            questionInput.style.border = "1px solid red";
        } else {
            // Invocar a função de envio do formulário
            questionInput.style.border = "none";
            handleFormSubmit(event);
        }
    });

    
    
</script>

</body>
</html>
